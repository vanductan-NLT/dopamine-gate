<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dopamine Gate</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="popup-header">
      <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
        <img src="icons/icon48.png" alt="Logo" style="width: 24px; height: 24px;">
        <h1 class="popup-title">Dopamine Gate</h1>
      </div>
      <div class="toggle-container">
        <label class="switch">
          <input type="checkbox" id="extension-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="popup-tabs">
      <button class="tab-btn active" data-tab="blocklist">
        Blocklist
      </button>
      <button class="tab-btn" data-tab="settings">
        Settings
      </button>
      <button class="tab-btn" data-tab="logs">
        History
      </button>
    </nav>

    <!-- Tab Content -->
    <main class="popup-content">
      <!-- Blocklist Tab -->
      <section class="tab-content active" id="panel-blocklist">
        <div class="panel-section">
          <p class="settings-hint">Select websites that require reflection before access.</p>

          <!-- Add Domain Form -->
          <div class="input-group">
            <input type="text" id="new-domain" class="input-field" placeholder="example.com">
            <button id="btn-add-domain" class="btn-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14" />
              </svg>
            </button>
          </div>

          <!-- Domain List -->
          <ul class="domain-list" id="domain-list">
            <!-- Populated by JS -->
          </ul>
        </div>
      </section>

      <!-- Settings Tab -->
      <section class="tab-content" id="panel-settings">
        <div class="panel-section">
          <label class="settings-label">Gemini API Key</label>
          <p class="settings-hint">
            Get a free key at
            <a href="https://aistudio.google.com/apikey" target="_blank"
              style="color: var(--color-accent); text-decoration: none; font-weight: 500;">Google AI Studio</a>
          </p>

          <div class="api-key-container">
            <input type="password" id="api-key" class="input-field" style="width: 100%; box-sizing: border-box;"
              placeholder="AIzaSy...">
            <button id="btn-toggle-key" class="btn-view">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
            </button>
          </div>

          <button id="btn-save-key" class="btn-primary">
            Save Configuration
          </button>

          <div id="api-key-status" class="status-message"
            style="margin-top: 12px; font-size: 12px; text-align: center;"></div>
        </div>

        <div class="panel-section"
          style="margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--color-border);">
          <label class="settings-label" style="font-size: 13px;">About</label>
          <p class="settings-hint" style="font-size: 12px; line-height: 1.5;">
            Dopamine Gate uses AI to evaluate your intent before accessing distracting sites.
            Stay focused on what matters.
          </p>
          <p style="font-size: 11px; color: var(--color-text-secondary); margin: 0;">Version 1.0.0</p>
        </div>
      </section>

      <!-- Logs Tab -->
      <section class="tab-content" id="panel-logs">
        <div class="logs-header">
          <label class="settings-label" style="margin: 0;">Recent Reflections</label>
          <button id="btn-clear-logs" class="btn-clear">
            Clear all
          </button>
        </div>

        <div id="logs-list">
          <!-- Populated by JS -->
        </div>

        <div class="empty-state" id="logs-empty">
          <div class="empty-icon">âœ“</div>
          <p>No recent history.</p>
        </div>
      </section>
    </main>
  </div>

  <script src="popup.js" type="module"></script>
</body>

</html>
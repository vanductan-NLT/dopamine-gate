"use strict";(()=>{var c={BLOCKLIST:"blocklist",API_KEY:"apiKey",LOGS:"logs"},l=["facebook.com","tiktok.com","twitter.com","instagram.com","youtube.com","reddit.com"];async function m(t){return new Promise(o=>{chrome.storage.sync.get(t,s=>{o(s)})})}async function i(){return(await m([c.BLOCKLIST])).blocklist??l}function a(t,o){try{let e=new URL(t).hostname.toLowerCase();return o.some(r=>{let n=r.toLowerCase();return e===n||e.endsWith("."+n)})}catch{return!1}}chrome.tabs.onUpdated.addListener(async(t,o,s)=>{let e=o.url||s.url;if(e&&!(e.startsWith("chrome://")||e.startsWith("chrome-extension://")))try{let r=await i();a(e,r)&&(console.log(`[Dopamine Gate] Blocked domain detected: ${e}`),await chrome.scripting.insertCSS({target:{tabId:t},files:["overlay.css"]}),await chrome.scripting.executeScript({target:{tabId:t},files:["contentScript.js"]}))}catch(r){let n=r instanceof Error?r.message:String(r);console.debug("[Dopamine Gate] Injection noise:",n)}});chrome.runtime.onMessage.addListener((t,o,s)=>{var e;return t.type==="CLOSE_TAB"&&((e=o.tab)!=null&&e.id&&chrome.tabs.remove(o.tab.id),s({success:!0})),!0});chrome.runtime.onInstalled.addListener(t=>{t.reason==="install"?console.log("[Dopamine Gate] Extension installed successfully!"):t.reason==="update"&&console.log(`[Dopamine Gate] Updated to version ${chrome.runtime.getManifest().version}`)});console.log("[Dopamine Gate] Background service worker started");})();
//# sourceMappingURL=background.js.map
